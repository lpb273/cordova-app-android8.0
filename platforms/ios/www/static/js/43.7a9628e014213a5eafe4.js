webpackJsonp([43],{YzM1:function(t,e,n){e=t.exports=n("FZ+f")(!0),e.push([t.i,"\n.login-wrap[data-v-3888439e] {\n  width: 100%;\n  height: 100%;\n  overflow: hidden;\n  background: #fff;\n  display: -webkit-box;\n  display: -webkit-flex;\n  display: flex;\n  -webkit-box-orient: vertical;\n  -webkit-box-direction: normal;\n  -webkit-flex-direction: column;\n          flex-direction: column;\n  -webkit-box-pack: start;\n  -webkit-justify-content: flex-start;\n          justify-content: flex-start;\n  -webkit-box-align: start;\n  -webkit-align-items: flex-start;\n          align-items: flex-start;\n  padding: 0 15px;\n  box-sizing: border-box;\n}\n.login-wrap-title[data-v-3888439e] {\n  font-size: 24px;\n  margin-top: 120px;\n}\n.weui-vcode[data-v-3888439e],\n.input-qr-code[data-v-3888439e] {\n  width: 100%;\n  border-bottom: 1px solid #eee;\n}\n.weui-vcode[data-v-3888439e] {\n  margin-top: 80px;\n}\n.sub-btn-wrap[data-v-3888439e] {\n  margin-top: 100px;\n}\n.veri-btn[data-v-3888439e] {\n  width: 100px;\n  display: inline-block;\n}\n","",{version:3,sources:["/Users/lpb/Desktop/kachuoweb_svn/kachuoAPPX/src/components/index/Login.vue"],names:[],mappings:";AACA;EACE,YAAY;EACZ,aAAa;EACb,iBAAiB;EACjB,iBAAiB;EACjB,qBAAqB;EACrB,sBAAsB;EACtB,cAAc;EACd,6BAA6B;EAC7B,8BAA8B;EAC9B,+BAA+B;UACvB,uBAAuB;EAC/B,wBAAwB;EACxB,oCAAoC;UAC5B,4BAA4B;EACpC,yBAAyB;EACzB,gCAAgC;UACxB,wBAAwB;EAChC,gBAAgB;EAChB,uBAAuB;CACxB;AACD;EACE,gBAAgB;EAChB,kBAAkB;CACnB;AACD;;EAEE,YAAY;EACZ,8BAA8B;CAC/B;AACD;EACE,iBAAiB;CAClB;AACD;EACE,kBAAkB;CACnB;AACD;EACE,aAAa;EACb,sBAAsB;CACvB",file:"Login.vue",sourcesContent:["\n.login-wrap[data-v-3888439e] {\n  width: 100%;\n  height: 100%;\n  overflow: hidden;\n  background: #fff;\n  display: -webkit-box;\n  display: -webkit-flex;\n  display: flex;\n  -webkit-box-orient: vertical;\n  -webkit-box-direction: normal;\n  -webkit-flex-direction: column;\n          flex-direction: column;\n  -webkit-box-pack: start;\n  -webkit-justify-content: flex-start;\n          justify-content: flex-start;\n  -webkit-box-align: start;\n  -webkit-align-items: flex-start;\n          align-items: flex-start;\n  padding: 0 15px;\n  box-sizing: border-box;\n}\n.login-wrap-title[data-v-3888439e] {\n  font-size: 24px;\n  margin-top: 120px;\n}\n.weui-vcode[data-v-3888439e],\n.input-qr-code[data-v-3888439e] {\n  width: 100%;\n  border-bottom: 1px solid #eee;\n}\n.weui-vcode[data-v-3888439e] {\n  margin-top: 80px;\n}\n.sub-btn-wrap[data-v-3888439e] {\n  margin-top: 100px;\n}\n.veri-btn[data-v-3888439e] {\n  width: 100px;\n  display: inline-block;\n}\n"],sourceRoot:""}])},pWAD:function(t,e,n){"use strict";function o(t){n("s0vA")}Object.defineProperty(e,"__esModule",{value:!0});var i=n("pDNl"),a=n("rHil"),s=n("2sLL"),r=n("1DHf"),l=n("zz/f"),c=(i.a,s.a,a.a,r.a,{name:"",props:[""],data:function(){return{timer:null,veritfyCodeTxt:"发送验证码",veritfyCode:!1,phoneValue:"",veriValue:""}},components:{XInput:i.a,XButton:s.a,Group:a.a,Cell:r.a},computed:{},beforeMount:function(){},mounted:function(){},methods:{getLocationData:function(){var t=sessionStorage.getItem("positionInfo")?sessionStorage.getItem("positionInfo"):"",e={latitude:t?t.Latitude:"",longitude:t?t.Longitude:""};Object(l.c)(e).then(function(t){console.log(t),1===t.result&&sessionStorage.setItem("currentScenic",t.data.scenic_id)}).catch(function(t){console.log(t)})},getUserLoginInfo:function(){var t=this;Object(l.H)({}).then(function(e){1===e.result&&(t.$store.commit("setUserLoginInfo",e.data),t.GLOBAL.setSession("userLoginInfo",e.data))}).catch(function(t){console.log(t)})},requestLogin:function(){var t=this;this.phoneValue&&this.veriValue?Object(l.M)({tel:this.phoneValue.replace(/\s*/g,""),code:this.veriValue,type:1}).then(function(e){1===e.result?(localStorage.setItem("token",e.data.accessToken),t.$vux.toast.show({type:"success",text:"登录成功",time:1e3,onHide:function(){t.getUserLoginInfo(),t.getLocationData()}}),t.$router.push("/indextab")):9e4===e.code?t.showToastInfo("验证码错误或过期"):10005===e.code?t.showToastInfo("手机号不能为空"):"1002"===e.code||1002===e.code?console.log(e.code):10006===e.code?t.showToastInfo("手机号不一致"):t.$router.push("/indextab")}).catch(function(t){console.log(t)}):this.phoneValue?this.showToastInfo("验证码不能为空"):this.showToastInfo("手机号不能为空")},requestVeriCode:function(){console.log("requestVeriCode"),Object(l.J)({tel:this.phoneValue.replace(/\s*/g,"")}).then(function(t){console.log(t)}).catch(function(t){console.log(t)})},sendVeriCode:function(){this.verifyPhoneCode(this.phoneValue)},verifyPhoneCode:function(t){var e=/^[1][3,4,5,7,8][0-9]{9}$/,n=t.replace(/\s*/g,"");e.test(n)?this.showToastInfo("验证码已发送",this.emitVeritfyCode):this.showToastInfo("手机号有误")},showToastInfo:function(t,e){var n=this;this.$vux.toast.text(t,"middle"),setTimeout(function(){n.$vux.toast.hide(),e&&e()},1e3)},emitVeritfyCode:function(){var t=this;this.veritfyCode=!0;var e=60;this.veritfyCodeTxt=e+"s",this.requestVeriCode(),this.timer=setInterval(function(){e>0?(--e,t.veritfyCodeTxt=e+"s"):(clearInterval(t.timer),t.veritfyCodeTxt="重新发送",t.veritfyCode=!1)},1e3)}},watch:{},beforeDestroy:function(){clearInterval(this.timer)}}),u=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"login-wrap"},[n("p",{staticClass:"login-wrap-title"},[t._v("登录")]),t._v(" "),n("group",{staticStyle:{width:"100%"}},[n("x-input",{staticStyle:{display:"none"},attrs:{title:"验证码"}}),t._v(" "),n("x-input",{staticClass:"weui-vcode",attrs:{title:"手机号",mask:"999 9999 9999",max:13,"is-type":"china-mobile","show-clear":!1,novalidate:""},model:{value:t.phoneValue,callback:function(e){t.phoneValue=e},expression:"phoneValue"}},[n("x-button",{staticClass:"veri-btn",attrs:{slot:"right",type:"primary",mini:"",disabled:t.veritfyCode},nativeOn:{click:function(e){return t.sendVeriCode(e)}},slot:"right"},[t._v(t._s(t.veritfyCodeTxt))])],1),t._v(" "),n("x-input",{staticClass:"input-qr-code",attrs:{title:"验证码",novalidate:"","show-clear":!1},model:{value:t.veriValue,callback:function(e){t.veriValue=e},expression:"veriValue"}})],1),t._v(" "),n("x-button",{staticClass:"sub-btn-wrap",attrs:{type:"primary"},nativeOn:{click:function(e){return t.requestLogin(e)}}},[t._v("登录")])],1)},d=[],A={render:u,staticRenderFns:d},f=A,p=n("VU/8"),v=o,h=p(c,f,!1,v,"data-v-3888439e",null);e.default=h.exports},s0vA:function(t,e,n){var o=n("YzM1");"string"==typeof o&&(o=[[t.i,o,""]]),o.locals&&(t.exports=o.locals);n("rjj0")("5f490a1e",o,!0,{})}});
//# sourceMappingURL=43.7a9628e014213a5eafe4.js.map