webpackJsonp([25],{"9y27":function(t,n,e){"use strict";function a(t){e("gQOS")}function i(t){e("pwZc")}function o(t){e("cP5P")}Object.defineProperty(n,"__esModule",{value:!0});var s=e("GgDs"),d=e("ALGc"),r=e("rHil"),l=e("pDNl"),A=e("2sLL"),p=e("mtWM"),u=e.n(p),c={data:function(){return{formData:new FormData,imgs:{},imgLen:0,videoUrl:"",videoUploadUrl:"https://core.kachuo.com/app/ewei_shopv2_app.php?i=5&c=site&a=entry&m=ewei_shopv2&do=mobile&r=util.uploader.uploadm"}},methods:{addVideo:function(t){var n=this.$refs.inputer;this.fil=n.files;for(var e=this.imgLen,a=(this.fil.length,0);a<this.fil.length;a++){if(Math.floor(this.fil[a].size/1024)>31457280)return this.showToast("请选择10M以内的视频！"),!1;this.imgLen++,this.$set(this.imgs,this.fil[a].name+"?"+(new Date).getTime()+a,this.fil[a])}this.submit()},getObjectURL:function(t){var n=null;return void 0!=window.createObjectURL?n=window.createObjectURL(t):void 0!=window.URL?n=window.URL.createObjectURL(t):void 0!=window.webkitURL&&(n=window.webkitURL.createObjectURL(t)),n},delImg:function(t){this.$delete(this.imgs,t),this.imgLen--},showLoading:function(){var t=this;this.$vux.loading.show({text:"上传中"}),setTimeout(function(){t.$vux.loading.hide()},2e3)},showToast:function(t){var n=this;this.$vux.toast.text(t,"mid"),setTimeout(function(){n.$vux.toast.hide()},2e3)},postData:function(){},submit:function(){var t=this;this.$vux.loading.show({text:"正在上传"});for(var n in this.imgs){n.split("?")[0];this.formData.append("file",this.imgs[n])}var e={timeout:1e4,headers:{"Content-Type":"multipart/form-data",Authorization:localStorage.getItem("token")}};u.a.post(this.videoUploadUrl,this.formData,e).then(function(n){console.log(n),1===n.data.result?(t.$vux.loading.hide(),t.$vux.toast.show({type:"success",text:"上传成功",time:1e3}),t.videoUrl=n.data.data.files[0].url,console.log(t.videoUrl),t.$emit("getVideoUploadUrl",n.data.data.files[0].url)):t.$vux.toast.show({type:"warn",text:"失败请重试",time:1e3})}).catch(function(t){console.log(t)})}},mounted:function(){}},h=function(){var t=this,n=t.$createElement,e=t._self._c||n;return e("div",{staticClass:"control-form"},[e("ul",{staticClass:"upload-imgs"},[t.imgLen>=1?t._e():e("li",[e("input",{ref:"inputer",staticClass:"upload",attrs:{type:"file",multiple:"",accept:"video/*"},on:{change:t.addVideo}}),t._v(" "),t._m(0)]),t._v(" "),t.videoUrl?e("li",[e("video",{staticClass:"video-wrap",attrs:{src:t.videoUrl}})]):t._e()])])},f=[function(){var t=this,n=t.$createElement,e=t._self._c||n;return e("a",{staticClass:"add"},[e("p",{staticClass:"add-icon"},[t._v("+")])])}],g={render:h,staticRenderFns:f},v=g,C=e("VU/8"),m=a,x=C(c,v,!1,m,"data-v-1a56f013",null),B=x.exports,E=e("cY6z"),w=e("zz/f"),b=(d.a,r.a,l.a,A.a,E.a,{data:function(){return{inputValue:"",textareaValue:"",videoUrlData:"",arressVal:""}},components:{XTextarea:d.a,Group:r.a,XInput:l.a,XButton:A.a,VideoUploader:B,Address:E.a},methods:{getVideoAddress:function(t){this.arressVal=t},getVideoUrl:function(t){this.videoUrlData=t},onEvent:function(t){},getInputVal:function(){},getTextareaValue:function(){},showToast:function(t){var n=this;this.$vux.toast.text(t,"mid"),setTimeout(function(){n.$vux.toast.hide()},2e3)},formData:function(){var t=this;return this.inputValue?this.textareaValue?this.videoUrlData?void(this.arressVal?this.submitForm():this.$vux.confirm.show({title:"提示",content:"发布地点未选，确定要发布吗？",onCancel:function(){},onConfirm:function(){t.submitForm()}})):void this.showToast("请上传视频"):void this.showToast("请输入内容"):void this.showToast("请输入标题")},submitForm:function(){var t=this;this.$vux.loading.show({text:"正在发布"}),Object(w.w)({type:this.$route.query.branch,title:this.inputValue,summary:this.textareaValue,video:this.videoUrlData,address:this.arressVal}).then(function(n){console.log(n),1===n.result?(t.$vux.loading.hide(),t.$vux.toast.show({type:"success",text:"发布成功",time:1e3,onHide:function(){t.$router.goBack()}})):(t.$vux.loading.hide(),t.$vux.toast.show({type:"warn",text:"失败，请重试",time:1e3}))}).catch(function(n){t.$vux.loading.hide(),console.log(n)})}}}),k=function(){var t=this,n=t.$createElement,e=t._self._c||n;return e("div",{staticClass:"input-textarea-wrap"},[e("p",{staticClass:"input-textarea-title"},[t._v("标题")]),t._v(" "),e("x-input",{staticClass:"input-textarea-input",attrs:{placeholder:"请输入标题","show-clear":!1},on:{"on-change":t.getInputVal},model:{value:t.inputValue,callback:function(n){t.inputValue=n},expression:"inputValue"}}),t._v(" "),e("p",{staticClass:"input-textarea-title"},[t._v("内容")]),t._v(" "),e("Group",[e("x-textarea",{staticClass:"input-textarea-textarea",attrs:{rows:6,max:999,name:"description",placeholder:"请输入内容"},on:{"on-change":t.getTextareaValue},model:{value:t.textareaValue,callback:function(n){t.textareaValue=n},expression:"textareaValue"}})],1),t._v(" "),t._m(0),t._v(" "),e("VideoUploader",{ref:"imgUpload",on:{getVideoUploadUrl:t.getVideoUrl}}),t._v(" "),e("Address",{on:{selectAddress:t.getVideoAddress}}),t._v(" "),e("x-button",{staticClass:"submit-btn",attrs:{type:"primary"},nativeOn:{click:function(n){return t.formData(n)}}},[t._v("发布")])],1)},V=[function(){var t=this,n=t.$createElement,e=t._self._c||n;return e("p",{staticClass:"image-upload-title"},[e("span",{},[t._v("上传视频")]),t._v(" "),e("span",{staticClass:"image-upload-weak-tip"},[t._v("( 视频大小不能超过30M )")])])}],U={render:k,staticRenderFns:V},_=U,D=e("VU/8"),y=i,$=D(b,_,!1,y,"data-v-1e8d9905",null),Y=$.exports,z=(s.a,{name:"",props:[""],data:function(){return{TitleObjData:{titleContent:"发布",showLeftBack:!0,showRightMore:!1}}},components:{Header:s.a,VideoUploaderSwap:Y},computed:{contentHeight:function(){return{height:document.documentElement.clientHeight-50+"px"}}},beforeMount:function(){},mounted:function(){},methods:{},watch:{}}),j=function(){var t=this,n=t.$createElement,e=t._self._c||n;return e("div",{staticClass:"release-video-wrap"},[e("Header",{attrs:{titleContent:t.TitleObjData.titleContent,showLeftBack:t.TitleObjData.showLeftBack,showRightMore:t.TitleObjData.showRightMore}}),t._v(" "),e("div",{staticClass:"release-video-content-wrap",style:t.contentHeight},[e("VideoUploaderSwap")],1)],1)},L=[],R={render:j,staticRenderFns:L},T=R,O=e("VU/8"),P=o,Z=O(z,T,!1,P,"data-v-1f041ea2",null);n.default=Z.exports},HPVN:function(t,n,e){n=t.exports=e("FZ+f")(!0),n.push([t.i,"\n.upload[data-v-1a56f013] {\n  opacity: 0;\n}\n.upload-imgs[data-v-1a56f013] {\n  overflow: hidden;\n  font-size: 0;\n}\n.upload-imgs li[data-v-1a56f013] {\n  position: relative;\n  width: 110px;\n  height: 110px;\n  font-size: 14px;\n  display: inline-block;\n  padding: 10px;\n  text-align: center;\n  vertical-align: middle;\n}\n.upload-imgs .add[data-v-1a56f013] {\n  display: block;\n  background-color: #f9f9f9;\n  color: #ffffff;\n  height: 94px;\n}\n.upload-imgs li .upload[data-v-1a56f013] {\n  position: absolute;\n  top: 0;\n  bottom: 0;\n  left: 0;\n  right: 0;\n  width: 118px;\n  height: 118px;\n}\n.upload-imgs .img[data-v-1a56f013] {\n  position: relative;\n  width: 94px;\n  height: 94px;\n  line-height: 94px;\n}\n.video-wrap[data-v-1a56f013] {\n  width: 94px;\n  height: 94px;\n  display: inline-block;\n  overflow: hidden;\n}\n.upload-imgs .img img[data-v-1a56f013] {\n  vertical-align: middle;\n  object-fit: cover;\n}\n.upload-imgs .img .close[data-v-1a56f013] {\n  display: none;\n}\n.upload-imgs li .img .close[data-v-1a56f013] {\n  display: block;\n  position: absolute;\n  width: 20px;\n  height: 20px;\n  right: -10px;\n  top: -10px;\n  line-height: 20px;\n  font-size: 20px;\n  color: #999;\n  background: #f9f9f9;\n  border-radius: 50%;\n}\n.add-icon[data-v-1a56f013] {\n  font-size: 50px;\n  color: #999;\n}\n","",{version:3,sources:["/Users/lpb/Desktop/kachuoweb_svn/kachuoAPPX/src/components/common/VideoUploader.vue"],names:[],mappings:";AACA;EACE,WAAW;CACZ;AACD;EACE,iBAAiB;EACjB,aAAa;CACd;AACD;EACE,mBAAmB;EACnB,aAAa;EACb,cAAc;EACd,gBAAgB;EAChB,sBAAsB;EACtB,cAAc;EACd,mBAAmB;EACnB,uBAAuB;CACxB;AACD;EACE,eAAe;EACf,0BAA0B;EAC1B,eAAe;EACf,aAAa;CACd;AACD;EACE,mBAAmB;EACnB,OAAO;EACP,UAAU;EACV,QAAQ;EACR,SAAS;EACT,aAAa;EACb,cAAc;CACf;AACD;EACE,mBAAmB;EACnB,YAAY;EACZ,aAAa;EACb,kBAAkB;CACnB;AACD;EACE,YAAY;EACZ,aAAa;EACb,sBAAsB;EACtB,iBAAiB;CAClB;AACD;EACE,uBAAuB;EACvB,kBAAkB;CACnB;AACD;EACE,cAAc;CACf;AACD;EACE,eAAe;EACf,mBAAmB;EACnB,YAAY;EACZ,aAAa;EACb,aAAa;EACb,WAAW;EACX,kBAAkB;EAClB,gBAAgB;EAChB,YAAY;EACZ,oBAAoB;EACpB,mBAAmB;CACpB;AACD;EACE,gBAAgB;EAChB,YAAY;CACb",file:"VideoUploader.vue",sourcesContent:["\n.upload[data-v-1a56f013] {\n  opacity: 0;\n}\n.upload-imgs[data-v-1a56f013] {\n  overflow: hidden;\n  font-size: 0;\n}\n.upload-imgs li[data-v-1a56f013] {\n  position: relative;\n  width: 110px;\n  height: 110px;\n  font-size: 14px;\n  display: inline-block;\n  padding: 10px;\n  text-align: center;\n  vertical-align: middle;\n}\n.upload-imgs .add[data-v-1a56f013] {\n  display: block;\n  background-color: #f9f9f9;\n  color: #ffffff;\n  height: 94px;\n}\n.upload-imgs li .upload[data-v-1a56f013] {\n  position: absolute;\n  top: 0;\n  bottom: 0;\n  left: 0;\n  right: 0;\n  width: 118px;\n  height: 118px;\n}\n.upload-imgs .img[data-v-1a56f013] {\n  position: relative;\n  width: 94px;\n  height: 94px;\n  line-height: 94px;\n}\n.video-wrap[data-v-1a56f013] {\n  width: 94px;\n  height: 94px;\n  display: inline-block;\n  overflow: hidden;\n}\n.upload-imgs .img img[data-v-1a56f013] {\n  vertical-align: middle;\n  object-fit: cover;\n}\n.upload-imgs .img .close[data-v-1a56f013] {\n  display: none;\n}\n.upload-imgs li .img .close[data-v-1a56f013] {\n  display: block;\n  position: absolute;\n  width: 20px;\n  height: 20px;\n  right: -10px;\n  top: -10px;\n  line-height: 20px;\n  font-size: 20px;\n  color: #999;\n  background: #f9f9f9;\n  border-radius: 50%;\n}\n.add-icon[data-v-1a56f013] {\n  font-size: 50px;\n  color: #999;\n}\n"],sourceRoot:""}])},Pvos:function(t,n,e){n=t.exports=e("FZ+f")(!0),n.push([t.i,"\n.input-textarea-wrap[data-v-1e8d9905] {\n  width: 100%;\n  height: 100%;\n  overflow: hidden;\n}\n.input-textarea-input[data-v-1e8d9905] {\n  width: 100%;\n  height: 40px;\n  background: #f9f9f9;\n  font-size: 14px;\n  border-radius: 4px;\n  font-weight: normal;\n}\n.input-textarea-textarea[data-v-1e8d9905] {\n  width: 100%;\n  height: 150px;\n  background: #f9f9f9;\n  font-size: 14px;\n  border-radius: 4px;\n}\n.input-textarea-title[data-v-1e8d9905] {\n  width: 100%;\n  height: 50px;\n  line-height: 50px;\n}\n.submit-btn[data-v-1e8d9905] {\n  margin-top: 50px;\n}\n.image-upload-title[data-v-1e8d9905] {\n  width: 100%;\n  height: 30px;\n  line-height: 30px;\n  margin-top: 10px;\n  padding-left: 10px;\n  box-sizing: border-box;\n}\n.image-upload-weak-tip[data-v-1e8d9905] {\n  font-size: 12px;\n  color: #999;\n}\n","",{version:3,sources:["/Users/lpb/Desktop/kachuoweb_svn/kachuoAPPX/src/components/layout/VideoUploaderSwap.vue"],names:[],mappings:";AACA;EACE,YAAY;EACZ,aAAa;EACb,iBAAiB;CAClB;AACD;EACE,YAAY;EACZ,aAAa;EACb,oBAAoB;EACpB,gBAAgB;EAChB,mBAAmB;EACnB,oBAAoB;CACrB;AACD;EACE,YAAY;EACZ,cAAc;EACd,oBAAoB;EACpB,gBAAgB;EAChB,mBAAmB;CACpB;AACD;EACE,YAAY;EACZ,aAAa;EACb,kBAAkB;CACnB;AACD;EACE,iBAAiB;CAClB;AACD;EACE,YAAY;EACZ,aAAa;EACb,kBAAkB;EAClB,iBAAiB;EACjB,mBAAmB;EACnB,uBAAuB;CACxB;AACD;EACE,gBAAgB;EAChB,YAAY;CACb",file:"VideoUploaderSwap.vue",sourcesContent:["\n.input-textarea-wrap[data-v-1e8d9905] {\n  width: 100%;\n  height: 100%;\n  overflow: hidden;\n}\n.input-textarea-input[data-v-1e8d9905] {\n  width: 100%;\n  height: 40px;\n  background: #f9f9f9;\n  font-size: 14px;\n  border-radius: 4px;\n  font-weight: normal;\n}\n.input-textarea-textarea[data-v-1e8d9905] {\n  width: 100%;\n  height: 150px;\n  background: #f9f9f9;\n  font-size: 14px;\n  border-radius: 4px;\n}\n.input-textarea-title[data-v-1e8d9905] {\n  width: 100%;\n  height: 50px;\n  line-height: 50px;\n}\n.submit-btn[data-v-1e8d9905] {\n  margin-top: 50px;\n}\n.image-upload-title[data-v-1e8d9905] {\n  width: 100%;\n  height: 30px;\n  line-height: 30px;\n  margin-top: 10px;\n  padding-left: 10px;\n  box-sizing: border-box;\n}\n.image-upload-weak-tip[data-v-1e8d9905] {\n  font-size: 12px;\n  color: #999;\n}\n"],sourceRoot:""}])},"V+TV":function(t,n,e){n=t.exports=e("FZ+f")(!0),n.push([t.i,"\n.release-video-content-wrap[data-v-1f041ea2] {\n  width: 100%;\n  overflow: hidden;\n  overflow-y: scroll;\n  padding: 0 15px;\n  box-sizing: border-box;\n  margin-top: 50px;\n}\n","",{version:3,sources:["/Users/lpb/Desktop/kachuoweb_svn/kachuoAPPX/src/components/pages/kachuoincome/ReleaseVideo.vue"],names:[],mappings:";AACA;EACE,YAAY;EACZ,iBAAiB;EACjB,mBAAmB;EACnB,gBAAgB;EAChB,uBAAuB;EACvB,iBAAiB;CAClB",file:"ReleaseVideo.vue",sourcesContent:["\n.release-video-content-wrap[data-v-1f041ea2] {\n  width: 100%;\n  overflow: hidden;\n  overflow-y: scroll;\n  padding: 0 15px;\n  box-sizing: border-box;\n  margin-top: 50px;\n}\n"],sourceRoot:""}])},cP5P:function(t,n,e){var a=e("V+TV");"string"==typeof a&&(a=[[t.i,a,""]]),a.locals&&(t.exports=a.locals);e("rjj0")("20354f76",a,!0,{})},gQOS:function(t,n,e){var a=e("HPVN");"string"==typeof a&&(a=[[t.i,a,""]]),a.locals&&(t.exports=a.locals);e("rjj0")("543f6094",a,!0,{})},pwZc:function(t,n,e){var a=e("Pvos");"string"==typeof a&&(a=[[t.i,a,""]]),a.locals&&(t.exports=a.locals);e("rjj0")("29124fd3",a,!0,{})}});
//# sourceMappingURL=25.804f3c951bfe1c19d601.js.map